services:
  ace:
    build: .
    container_name: ace
    restart: unless-stopped
    ports:
      - "8000:8000"
    environment:
      - ACE_MEM_DIR=mem
      - ACE_DATA_DIR=data
      - ACE_DB_PATH=data/ace.db
      - ACE_MAX_PROMPT_CHARS=8000
      - ACE_QUEUE_MAX_WAITERS=32
      # If you later put it behind HTTPS reverse proxy, set:
      # - ACE_COOKIE_SECURE=1
      # Optional API key:
      # - ACE_API_KEY=change-me
    volumes:
      - ./mem:/app/mem
      - ./data:/app/data